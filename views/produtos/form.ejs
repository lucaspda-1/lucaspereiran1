<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/messages') %>

<main class="container mt-4">
  <h1><%= produto ? 'Editar Produto' : 'Novo Produto' %></h1>
  
  <form action="<%= produto ? `/produtos/${produto.id}?_method=PUT` : '/produtos' %>" method="POST">
    <div class="mb-3">
      <label for="nome" class="form-label">Nome</label>
      <input type="text" class="form-control" id="nome" name="nome" 
             value="<%= produto ? produto.nome : '' %>" required>
    </div>
    
    <div class="mb-3">
      <label for="descricao" class="form-label">Descrição</label>
      <textarea class="form-control" id="descricao" name="descricao" rows="3">
        <%= produto ? produto.descricao : '' %>
      </textarea>
    </div>
    
    <div class="row mb-3">
      <div class="col">
        <label for="preco" class="form-label">Preço (R$)</label>
        <input type="number" step="0.01" class="form-control" id="preco" name="preco" 
               value="<%= produto ? produto.preco : '' %>" required>
      </div>
      
      <div class="col">
        <label for="quantidade" class="form-label">Quantidade</label>
        <input type="number" class="form-control" id="quantidade" name="quantidade" 
               value="<%= produto ? produto.quantidade : '' %>" required>
      </div>
    </div>
    
    <div class="mb-3">
      <label for="categoria" class="form-label">Categoria</label>
      <input type="text" class="form-control" id="categoria" name="categoria" 
             value="<%= produto ? produto.categoria : '' %>">
    </div>
    
    <button type="submit" class="btn btn-primary">
      <%= produto ? 'Atualizar' : 'Salvar' %>
    </button>
    <a href="/produtos" class="btn btn-secondary">Cancelar</a>
  </form>
</main>

<%- include('../partials/footer') %>